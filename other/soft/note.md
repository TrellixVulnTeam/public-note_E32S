# 目录
<!-- TOC -->

- [目录](#目录)
- [一、数据通信基础](#一数据通信基础)
    - [1.1 信道特性](#11-信道特性)
    - [1.2 传输介质](#12-传输介质)
    - [1.3 数据编码](#13-数据编码)
    - [1.4 数字调制技术](#14-数字调制技术)
    - [1.5 脉冲编码调制](#15-脉冲编码调制)
    - [1.6 通信方式](#16-通信方式)
    - [1.7 交换方式](#17-交换方式)
    - [1.8 多路复用技术](#18-多路复用技术)
    - [1.9 差错控制](#19-差错控制)
- [二、广域通信网](#二广域通信网)
    - [2.1 公共交换电话网(PSTN)](#21-公共交换电话网pstn)
    - [2.2 X.25公用数据网](#22-x25公用数据网)
        - [1) 流量控制](#1-流量控制)
        - [2) 差错控制](#2-差错控制)
        - [3) HDLC](#3-hdlc)
        - [4) PLP](#4-plp)
    - [2.3 帧中继(FRN)](#23-帧中继frn)
    - [2.4 ISDN](#24-isdn)
    - [2.5 ATM](#25-atm)
    - [2.6 其他](#26-其他)
- [三、局域网与城域网](#三局域网与城域网)
    - [3.1 局域网技术基础](#31-局域网技术基础)
    - [3.2 以太网](#32-以太网)
    - [3.3 VLAN](#33-vlan)
    - [3.4 局域网互联](#34-局域网互联)
- [五、网络互联](#五网络互联)
    - [5.1 网络互联设备](#51-网络互联设备)
    - [5.2 IP协议](#52-ip协议)
    - [5.3 TCP协议](#53-tcp协议)
    - [5.3 网关协议](#53-网关协议)
        - [1) 内部网管协议](#1-内部网管协议)
- [八、网络与应用服务器配置](#八网络与应用服务器配置)
    - [8.1 【重要】Windows下的应用服务器配置](#81-重要windows下的应用服务器配置)
        - [1) WEB服务器](#1-web服务器)
        - [2) FTP服务器](#2-ftp服务器)
        - [3) DNS服务器](#3-dns服务器)
        - [4) DHCP服务器](#4-dhcp服务器)
        - [5) 邮件服务器](#5-邮件服务器)
        - [6) pix防火墙](#6-pix防火墙)
    - [8.2 Linux下的应用服务器的配置](#82-linux下的应用服务器的配置)
        - [1) 常用命令](#1-常用命令)
        - [2) DHCP服务器](#2-dhcp服务器)
        - [3) vsftp](#3-vsftp)
        - [4) DNS](#4-dns)
    - [8.3 其他](#83-其他)
- [九、组网技术](#九组网技术)
    - [9.1 交换机基础](#91-交换机基础)
    - [9.2 路由器基础](#92-路由器基础)
    - [9.3 【重要】访问控制表(ACL)](#93-重要访问控制表acl)
    - [9.4 交换机和路由器配置](#94-交换机和路由器配置)
- [十、计算机基础](#十计算机基础)
    - [10.1 数据表示](#101-数据表示)
        - [1) 原码](#1-原码)
        - [2) 反码](#2-反码)
        - [3) 补码](#3-补码)
        - [4) 定点数](#4-定点数)
        - [5) 浮点数](#5-浮点数)
        - [6) 海明码](#6-海明码)
    - [10.2 CPU组成](#102-cpu组成)
    - [10.3 存储管理](#103-存储管理)
- [附录-错题记录](#附录-错题记录)

<!-- /TOC -->

# 一、数据通信基础
## 1.1 信道特性
* 信道带宽
    * 模拟信道带宽: `W = f2 - f1`
        * f1是信道能通过的最低频率, f2是信道能通过的最高频率, 由物理特性决定
    * 数字信道带宽
        * 码元, 一个数字脉冲, 也可以理解为一个符号
        * 码元速率(波特率), 单位时间内信号变换的次数, 也可以理解为传输符号的个数: `B = 1 / T`
            * B为波特率, T为单个码元传输时间
            * 对于无噪声的模拟信道带宽为W， 奈奎斯特定理表明，极限波特率为: `B = 2*W`
        * 【重要】数据速率(比特率): `R = B * log2(N)`, 因此无噪信道的极限比特率为 `R = 2 * W * log2(N)`
            * N为码元种类数, 如3bit的码元种类数为8
            * 已知信道带宽，可以知道极限波特率，如果知道目标数据速率(有可能是信道容量)，可以进一步求的N
        * 【重要】有噪声的信道极限数据速率(香浓定理)为: `C = W * log2(1 + S / N)`
            * S/N 为信噪比, db = 10*log10(S/N)
        * 数字信道的带宽就是 信道能达到的最大数据速率。
* 误码率: `Pc = Ne / N`
    * Ne为出错的位数, N为传送的总位数。
    * 计算机网络要求Pc < 10^(-6), 1Mb最多只能错一个。
* 信道延迟, 从信源到信宿需要的时间。

## 1.2 传输介质
* 双绞线, 通常一根民用网线中有多根双绞线。
* 同轴电缆
* 光纤
* 无线信道

## 1.3 数据编码
* 单极性码, 只用正的(或负的)的表示0，0V表示1。抗噪性能差，需要时钟信号配合定时
* 极性码, 用正负电压分别表示0和1。抗噪性能好，需时钟信号配合定时。
* 双极性码, 信号在正负零之间变化。
    * AMI, 一种双极性码, 遇到1使信号正负交替, 遇到0则保持零电平。
* 归零码, 码元中间的信号回归到零电平。自定时，抗干扰好。
* 双相码，每一位码元都要有一个信号翻转。自定时，检错。
    * 曼彻斯特编码， 1->0表示0, 0->1表示1
    * 差分曼彻斯特编码
* 不归零码，1出现翻转电平，0出现不翻转电平。
* 【重要】4B/5B编码，使用曼彻斯特编码和差分曼彻斯特编码会导致每bit都要跳变，因此带宽会是数据速率的两倍，成本太高。
    * 先进行4B/5B译码 然后再通过NRZ编码。

## 1.4 数字调制技术
* 调幅(ASK), 将0和1调制为不同幅度，但是频率相同的载波。
* 调频(FSK), 将0和1条职位不同频率，但是幅度相同的载波。
* 跳相(PSK), 利用相邻载波信号的香味来表示数据的信息，频率和幅度不变。
    * DPSK 相位不变为1 反相位为0
* 正交调幅(QAM), 对正弦波和余弦波进行数字调幅, 相加后进行传输。是ASK和PSK的结合使用。
    * 【重要】该书涉及的QAM通常是16QAM，即一个码元有16个符号，数据速率是波特率的4倍。

## 1.5 脉冲编码调制
* 采样
    * 【重要】根据奈奎斯特采样定理，采样速率必须大于模拟信号最高频率的两倍。否则无法恢复原来的模拟信号。
* 量化
* 编码

## 1.6 通信方式
【重要】主要是要一些计算方法:
* 电磁波速率: 200km/ms
* 传播时延: 距离/电磁波速率
* 对于同步方式
    * 每帧有一应一答两个包，每个包都有传播时延。
    * N帧有2N个包，有2N * 单个包传播时延。
    * N帧有N * 单位帧bit的数据量，传输耗时为N * 单位帧耗时/速率。


## 1.7 交换方式
* 电路交换, 用物理线路吧发送方和接收方直接连通。3个阶段:
    * 1) 建立线路
    * 2) 数据传输
    * 3) 释放线路
    * 独占性强，实时性好，适合于大量数据传输。
* 报文交换(存储转发交换), 不要求通信节点之间建立专用线路，报文中包含目标地址，完整的报文在网络中进行传送。
    * 每个中间节点接受完整的报文
    * 解析报文目标地址，进行转发
    * 缺点是通信可能有延时。
* 分组交换, 类似报文交换，但是限制了报文的长度.节点会对数据进行分组病编号，每个分组都有原地址和目标地址。
    * 数据包，类似报文交换，每个分组都有完整的地址信息。可能存在重排序和丢包问题。
    * 虚电路，类似电路交换，发送端和接收端建立逻辑连接。发送端发出的分组都走这一条通路。其实就是先建立会话，会话建立后中间节点的转发就已经确定了，一个包一个包的传，效率较低。

## 1.8 多路复用技术
* 【重要】数字传输系统
    * T1，24路时分多路的方式符合在一条1.544Mb/s的总信道，每一路的传输速率是56Kb/s
    * E1，总速率为2.048Mb/s，子信道速率为64Kb/s，有32个子信道
        * CH0用于帧同步，CH16用来传送指令
    * E2，4个E1。E3、E4同理。
 
## 1.9 差错控制
* 奇偶校验
    * 水平奇偶校验，7bit的ASCII后增加1bit，使码字中1的个数变成奇数或偶数。
    * 垂直奇偶校验，将传输的信息分组，分为若干行列。组中每个字符相同位进行奇偶校验，最终产生一批奇偶校验字符，附加在分组信息之后。
    * 水平垂直奇偶校验，实在水平校验的基础上实施垂直校验，保证最后一位的正确性。
* 海明码
    * 【重要】海明距，一个码字改变成另一个码字的最小位数。
    * 如果海明距为d，则所有小于等于d-1位的错误都可以检查出来，所有小于d/2的错误都可以修正。
    * 【重要】单bit海明码纠错下限：`2^k > k + m + 1`
        * k为校验位数，m为信息位数
* CRC

# 二、广域通信网
## 2.1 公共交换电话网(PSTN)
* 组成部分:
    * 本地回路, 采用模拟传输
    * 干线, 采用数字传输
    * 交换机, 采用数字传输
* 本地回路是模拟的，因此需要把数字信号转为模拟信号。干线和交换机是数字的，因此传输到端局后，需要把模拟信号转换为数字信号。效率较低。

## 2.2 X.25公用数据网
X.25是以分组方式进行工作的DTE(终端)和DCE(调制解调器)接口，是【分组交换技术】。X.25包含了物理层、链路层和分组层的协议。
* 物理层协议: X.21, 定义主机与物理网络之间的电气特性。
* 链路层协议: LAP-B, 进行可靠数据传输。包括帧格式定义和差错控制。是HDLC的一部分(高级数据链路控制协议)
* 分组层协议: PLP, 描述主机与网络之间的相互作用。分组定义、寻址、流量控制以及拥塞控制。运行用户建立虚电路。

### 1) 流量控制
流量控制用于让发送节点感知到接收节点的处理速度，以此控制发送速度，避免接收节点处理速度过慢，缓冲区溢出，后续的数据被丢掉。
* 停等协议
    * 发送出一帧，等待应答信号(ACK)后才发送下一帧。线路利用率为: `E = Tf / (2Tp + Tf)`
    * E为线路利用率, Tf为发送一帧的时间, Tp为一个包的传播延迟。
* 滑动窗口协议
    * 停等协议效率较低，滑动窗口运行连续多针而无须等待应答。
    * 每个帧都会进行编号，以控制后续传输。
    * 若窗口大小为W，接收节点响应i，发送端会将发送窗口设置为(i, i+W]，W为接收节点告诉发送端的。

### 2) 差错控制
* 停等ARQ
    * 停等流控和自动重发结合，发送一帧后必须等待应道，收到应答信号ACK后发送下一阵，收到否定应答NAK重发该镇。ACK超时也会进行重发。
* 选择重发ARQ
    * 窗口流控和自动重发的结合。接收节点会响应窗口中哪个帧失败了，正确的帧会被缓存。
* 回退N帧ARQ
    * 窗口流控和自动重发的结合。接收节点响应窗口中第q帧丢失了，则[q, m]的帧都会重发。

### 3) HDLC
Ciscio路由器同步串口默认采用HDLC协议。

### 4) PLP
* 支持虚电路
    * 交换虚电路(SVC), 向网络发送请求建立连接的报文，虚电路一旦建立，可以保证数据正确达到接收方。建立耗时。
    * 永久虚电路(PVC), 用户预先租用，无需建立耗时。
* PLP协议
    * 将数据分成128字节大小的块，再加上24bit或32bit的分组头。

## 2.3 帧中继(FRN)
X.25的进化，也是【分组交换技术】，工作在网络模型的物理层和链路层。帧中继在链路层建立虚电路。

## 2.4 ISDN
综合业务数字网, 是【数字交换电话系统】。
* 窄带ISDN(N-ISDN) 把视频、音频和数据业务在一个网络上传输。
    * 提供基本速率2B+D和一次群速率30B+D。B是64Kb/s的语音数据信道, D是16Kb/s的信令信道。 
    * 小型用户通过NT1将挂接8台设备共享2B+D的信道(144Kb/s)
    * 大型企业通过NT2将挂接8台设备共享30B+D的信道(2.048Mb/s)
* 传输模式
    * 同步传输模式(STM)，时分多路服用，不同的子信道通过帧内时间片进行区分，每个子信道周期性占用帧中的固定时间片。
    * 异步传输模式(ATM)

## 2.5 ATM

## 2.6 其他
* PPP(点对点协议)协议工作于数据链路层,  包含LCP和NCP协议。LCP负责链路建立，NCP负责网络层协议的协商。
* DSL(数字用户线路), 允许用户在传统电话线上提供高速的数据传输。
    * ADSL, 非对称DSL, 上下行流量不对称。需要安装PPPoE，并通过ADSL Model连接到电话入户接线盒。一般具有3个信道，划分方式为频分复用：
        * 1.544-9Mb/s的高速下行信道
        * 16-640Kb/s的双攻信道
        * 64Kb/s的语音信道
    * SDSL, 对称DSL，上下行流量对称，最高可达到1.544Mb/s
    * ISDNDSL, 介于IDSN和DSL之间
    * HDSL, 高比特率DSL
    * VDSL, 甚高比特率DSL, 最快的DSL，是ADSL的快速版。
* HFC，将光缆敷设到小区，然后通过光电转换节点，利用有线电视CATV的总显示同轴电缆连接到用户。
    * 用户端需要Cable Model。
    * 局端用于控制和管理用户的设备为CMTS，可以管理和控制Cable Model。
* CSMA/CD
    * 坚持监听
        * 信道空闲--->立即发送
        * 信道忙----->继续监听
    * 非坚持监听
        * 信道空闲--->立即发送
        * 信道忙----->后退随机时间重新发送
    * p坚持性监听
        * 信道空闲--->以概率p发送，以1-p后退随机事件
        * 信道忙----->继续坚听

# 三、局域网与城域网
## 3.1 局域网技术基础
* 总线拓扑，总线是一种多点截止，所有站点都通过接口硬件连接到总线上。数据帧沿着总线两端传播，到达末端被终端匹配器吸收。多个站同时发送数据会产生冲突。
* 星型拓扑，中心节点在星型网络中起到控制和交换的作用。Hub接收node发送的数据帧，然后向所有的输出链路广播。

## 3.2 以太网
* 传统以太网，10Mb/s
* 快速以太网, 100Mb/s
    * 10Base-T
    * 10Base-F
* 千兆以太网, 1000Mb/s
    * 1000BAse-CX
    * 1000BAse-LX
    * 1000BAse-SX
    * 1000BAse-TX
    * 物理层采用4B/5B或8B/9B编码。

## 3.3 VLAN
VLAN是一种将物理上的局域网从逻辑上划分为多个子网的技术。VLAN目的是为了解决交换机在进行局域网互联时，无法限制广播的问题。
* 交换机根据VLAN标记和目标地址进行转发。
* 进入目的网段时，交换机会删除VLAN标记，恢复原来的帧结构。
* VLAN的划分方法：
    * 根据端口划分VLAN，这是一种静态的VLAN划分方法。
    * 根据MAC地址划分VLAN
    * 根据网络层划分VLAN
        * 支持根据网络层IP划分
        * 支持根据网路层协议划分
* VTP(VLAN中继协议), 用户交换网络中简化对VLAN的管理
    * 交换机的VTP模式：
        * 服务器模式, 可以设置VLAN的信息，服务器会自动将这些信息广播到其他交换机进行统一配置。
        * 透明模式，可以配置VLAN信息，接受其他VLAN的信息但是不进行配置，单纯的转发给其他交换机。
        * 客户模式，只允许被动的接受VLAN配置，不能进行配置。
    * VTP修剪, VALN的包会传播到所有与输出端口上，如果相邻的交换机不存在包中的VLAN的输出端口，则该发送是可以省略的。
        * 静态修剪，人为配置。
        * 动态修剪，交换器需要市场共享VLAN信息。要求所有交换机都工作在【服务器模式】

## 3.4 局域网互联
这里主要强调下生成树协议(STP)。STP是为了解决环路情况下的广播风暴问题，通过生成树算法，可以阻塞部分端口，构造出一个遍历了所有节点的生成树结构。在STP中用于进行生成树的相关帧称为网桥协议数据单元 (BPDU) 。
* STP实施步骤:
    * 选举根桥。
        * 每个交换机都具有一个唯一的桥ID(BID, Bridge ID)
        * BID由2B网桥优先级和6B的MAC地址组成
        * BID的信息被封装在BPDU中，每个交换机广播接收到的BPDU和发送自身的BPDU，通过BPDU泛洪，可以获知BID最小的交换机，该交换机即被选为根桥。
    * 每个非根桥交换机计算到达根桥的最短路径。
        * 选举了根桥后，其他的交换就成为了非根桥。根桥上的接口都是指定端口，会转发数据包。
        * 每台非根桥要选举一条到根桥的根路径。STP使用路径代价Cost值来决定到达根桥的最佳路径（Cost是累加的，带宽大的链路Cost低）
        * 最低Cost值的路径就是根路径，该端口就是根端口；如果Cost一样，就根据选举顺序选举根口。
    * 选举指定端口和非指定端口
        * 当交换机确定了根端口后，还必须将剩余端口配置为指定端口 (DP) 或非指定端口（非 DP），以完成逻辑无环生成树。
        * 交换网络中的每个网段只能有一个指定端口。当两个非根端口的交换机端口连接到同一个 LAN 网段时，会发生竞争端口角色的情况。
        * 这两台交换机会交换 BPDU 帧，以确定哪个交换机端口是指定端口，哪一个是非指定端口。
        * 一般而言，在一个网段中，选择其中BID最小的作为指定端口。
* STP收敛过程
    * 当网络的拓扑发生变化时，网络会从一个状态向另一个状态过渡，重新打开或阻断某些端口。交换机的端口要经过几种状态：
        * 阻塞（Blocking），耗时20s。接收并处理BPDU。
        * 监听状态（Listenning），耗时15s。接收并处理BPDU。
        * 学习状态（Learning），耗时15s。接收并处理BPDU，学习MAC地址。
        * 转发状态（Forwarding），收敛。接收并处理BPDU，转发接口上收到的数据，转发其它接口发来的数据帧，学习MAC地址。
* 端口类型
    * 根端口(root port)， 存在于非根桥上，指到达根桥路径开销最小的端口，每个交换机只能有一个。
    * 指定端口(designated port)，负责发送网段BPDU的端口，每个物理网段只能有一个。
    * 非指定端口(non-designated )，被阻塞的端口，不能转发数据帧。

# 五、网络互联
## 5.1 网络互联设备
冲突域是指，在同一域下设备不能同时发送数据，会造成链路冲突。广播域是指在同一域下一个设备发送数据，其他设备可以接收到。
* 物理层，不划分冲突域和广播域，所有接口共享一个冲突域和广播域。
    * 中继器
    * 集线器
* 链路层, 划分冲突域但是不划分广播域，也就是说每一个端口对应一个单独的冲突域，所有端口共享一个广播域。
    * 网桥
* 网络层, 划分冲突域和广播域，也就是说每一个端口对应一个单独的冲突域和广播域。
    * 路由器
* 其它层
    * 网关

## 5.2 IP协议
一个IP包最大为`MTU = 1500字节`, 其中包头最小为20字节。当一个包超过了MTU后需要被拆分为多个包。IP数据包收不IPH最少为5字节。
* IP公网地址
    * A类，1.0.0.0 - 127.255.255.255 / 8
    * B类，128.0.0.0 - 191.255.255.255 / 16
    * C类，192.0.0.0 - 192.255.255.255 / 24
    * D类，224.0.0.0 - 239.255.255.255 组播地址。
    * E类，240.0.0.0. - 255.255.255.255 保留给实验用。
* IP私有地址
    * A类 10.0.0.0.
    * B类 172.16.0.0 - 172.31.0.0
    * C类 192.168.0.0 - 192.168.255.0
* 组播中，224.0.0.1表示本地子网所有主机, 224.0.0.2表示所有路由器

## 5.3 TCP协议
发送窗口wnd = min[rwnd, cwnd]
* rwnd通过对端回报确定
* cwnd通过慢启动确定
    * 发送了一个cwnd后就停止发送，等待确认后发送下一个cwnd。
    * 每成功发送一批cwnd，就把cwnd翻倍，因此cwnd是指数增长。
    * 出现拥塞后，重置cwnd为1，并且设置sshtresh=cwnd/2
    * 指数增长到sshtresh后，开始增长cwnd，每发送成功一次cwnd，就把cwnd+=1


## 5.3 网关协议
### 1) 内部网管协议
* RIP，基于距离矢量算法的路由协议，通过`UDP`传输。通过达到目的地的最少条数来选取最佳路径，【默认30s】向相邻设置发出整个路由表副本。跳数达到15跳后认为不可达。
    * RIPv1，不支持边长子网掩码(VLSM)，采用广播。
    * RIPv2, 支持边长子网掩码, 支持明文认证和MD5密文认证，默认采用组播，组播地址为225.0.0.9，可以设置为广播。
    * 水平分割，为解决环路问题，路由器会选择性的发送路由表，主要指路由信息不会被发送给信息的来源。
    * 反向毒化
* OSPF，一种链路状态协议，OSPF路由器维护一个本地链路状态表，并随时向其他相邻路由器发送链路状态的更新信息。通过`TCP`传输.
    * 通过Hello协议发现邻居。
    * 在每一个广播域或NBMA中，需要选择一个DR，其他路由器只与DR建立邻居关系，把自己掌握的链路状态信息交给DR。
    * 通过Dijkstra算法计算最短路径
    * 不进行定期广播来更新路由，而是发生路由结构变更时才进行更新。
    * 区域划分
        * 主干区域，区域0，连接各个区域的传输网络，其他区域均通过主管区域交换路由信息
        * 标准区域，可以接受任何链路更新信息
        * 存根区域，不接受自治系统外的路由信息，对系统外的路由采用默认路由0.0.0.0
        * 完全存根区域，不接受自治系统外的路由信息，也不接受自治系统内的其他区域路由信息
        * 不完全存根区域，类似存根区域，但是接受类型7的链路状态公告发送的外部路由信息
    * 路由器分类
        * 内部路由器，所有接口都在同一个区域内的路由器
        * 主干路由器，连接主干区域接口的路由器。
        * 区域边界路由器，连接多个区域的路由器，通常作为区域的出口。
        * 自治系统边界路由器，至少拥有一个接口连接外部自治系统接口的路由器。

# 八、网络与应用服务器配置
## 8.1 【重要】Windows下的应用服务器配置
Windows下需要IIS(因特网信息服务器)的支持。
### 1) WEB服务器
* 选项卡
    * 网站选项卡，设置网站的标识，网站描述、ip地址和端口号、超时连接、启用日至记录。
    * 主目录选项卡，指定WEB内容的来源。
    * 目录安全性，微网站进行身份验证和访问控制
        * 身份验证方法，可以组织未授权用户与限制内容建立http连接。可以选择匿名访问，无需专用的账户，匿名访问默认使用某个账户是可以配置的。

### 2) FTP服务器
* 占用端口21
* 权限配置
    * 读取，提供用户uliulan。
    * 写入，以http方式向服务器写入数据
    * 目录浏览，客户可以查看服务器上的目录结构
    * CGI，web与进程的接口标准。

### 3) DNS服务器
* DNS记录类型
    * CNAME，实现别名
    * A记录，实现域名到ip的转换
    * PTR，实现ip到域名的转换
    * MX, 邮件交换器
* 客户端DNS查询顺序
    * 本地DNS缓存
    * host表
    * 本地配置的DNS服务器(后面开始迭代查询)
    * 根域名服务器
    * 顶级域名服务器
    * 权限域名服务器
* DNS轮询
    * 按照A记录的顺序，逐一分配不同的ip，实现了简单的负载均衡。
    * 启用网络掩码排序，将会把客户端ip和记录的ip进行最大长度匹配来选择最佳ip(因为通常是子网内的ip，速度快)
* 域名服务器分类
    * 转发域名服务器, DNS收到查询请求后，首先在自己的区域文件中找，再到告诉缓存中找，如果找不到，则向转发服务器进行查询
    * 缓存域名服务器
    * 主域名服务器，存储区域中的主副本
    * 辅助域名服务器，从某一个主域名服务器复制过来的辅助副本，只读。
* 正向解析, 将域名转换为ip
* 反向解析，将ip转换为域名
* dns输入合格域名为 `<node-domain>.<parent-domain>.<first-domain>`

### 4) DHCP服务器
DHCP协议是一套基于UDP的协议，DHCP Server可能有多台。
* DHCP请求流程
    * client广播discover报文(请求ip)
    * server收到后响应offer报文(准备提供ip)
    * client只接受最早收到的，并广播request报文(客户端确认使用某个ip)，并在报文中包含了server的ip和租用的ip。
    * server响应client报文ack(包含租期信息),若不拒绝用户租用，响应nack
    * client接收到后检查ip是否可以使用，若不能使用发送decline报文, 若可以使用直接忽略。
    * client通过release报文释放ip
    * 主要流程: discover(client)--->offer(server)--->request(client)--->ack(server)--->release(client)
* DHCP中继代理技术可以实现跨网段工作

### 5) 邮件服务器
* 电子邮件发送协议：SMTP
* 电子邮件接受协议：POP3
* 客户端配置邮件服务器:
    * pop3.domain.com
    * smtp.domain.com

### 6) pix防火墙
* `nameif eth0 outside security 0`, 配置eth0的名称为outside，切优先级最高。

## 8.2 Linux下的应用服务器的配置
### 1) 常用命令
* `ifconfig [device]`
* `ifconfig eth0 <ip> mask <mask>`
* `tracert <ip>`, 显示经过的路由器。
* `/etc/hostname`, 包含了linux主机的名称和完全的域名。
* 组策略A-G-DL-P
    * A: 用户账号
    * G: 全局组
    * DL: 本地组
    * P: 资源权限

### 2) DHCP服务器
默认DHCP服务器的配置文件为`/etc/dhcpd.conf`

### 3) vsftp
very secure ftp, 是一种基于ftp的安全ftp协议。配置文件是/etc/vsftp/vsftpd.conf.
* service vsftpd start/stop
* userlist_enable=YES, 表示用户名单中的用户不能访问
* max-per-ip
* max-clients

### 4) DNS
* /etc/init.d/named start/stop
* master指明某个域的主服务器
* Directory指明了正向解析的文件数据

## 8.3 其他
* 远程桌面使用3389端口

# 九、组网技术
## 9.1 交换机基础
* 交换机作用
    * 通常我们指的交换机是二层交换机, 随着科技发展, 目前也有三层、四层交换机。
    * 基于MAC地址识别来实现数据帧转发功能的网络连接设备。根据近日端口数据帧中的MAC地址进行过滤和转发。
* 工作方式
    * 存储方式, 存储帧到交换机中，并进校校验再做转发, 速度较慢。
    * 快速转发, 只检查数据帧目的地址，速度快，但是有错误帧。
    * 碎片丢弃，只检查是否为冲突碎片，如果不是直接转发。
* 工作原理
    * 交换机初始交换表为空，通过学习的方式建立MAC地址到交换机端口的映射。
    * 交换表的建立方式为通过发送方来获取。当A的数据通过P1端口到交换机，交换表中就会有A_MAC-->P1记录。
    * 数据包发往B时，查询交换表，找到对应的B_MAC所对应的端口P2，进行转发。
    * 若B_MAC不存在，则向所有的非P1端口广播。
* 默认情况下交换机所用端口属于同一VLAN。不同VLAN之间通信需要三层设备。

## 9.2 路由器基础
路由器工作在OSI的第三层(网络层)，根据接收到的数据包中的网络层目的地址以及路由器维护的路由表决定下一跳的地址。路由器可以和网络上的其他路由器交换路由和链路信息来维护路由表。
* 路由器端口:
    * 【重要】RJ-45, 通过双绞线连接以太网。
    * AUI端口, 用在令牌环网和总线型以太网中。
    * 高速同步串口(Serial), 用于连接DDN、帧中继、X.25和PSTN等网络。
    * ISDN BRI, 通过ISDN线路实现路由器和Internet其他网络连接。
    * 异步串口, 主要用于Modem和Modem池的连接。
    * Console端口，通过配置专用电缆连接至计算机串行口。
    * AUX端口，在远处配置时使用。
* 路由器转发过程：
    * 主机将分组发给默认路由，默认路由收到分组之后，根据分组中的目的地址查询路由表
    * 路由表支出该分组的传输路径，路由器知道该分组的下一跳路由器IP地址
    * 通过ARP得到下一跳IP对应的MAC地址，替换数据分组中的MAC地址，转发给下一跳路由器。
* 路由表：
    * 路由源码 目的地址 掩码 下一跳路由器地址
    * 第一列为路由源码
        * S : 静态路由
        * C : 直连
        * O : OSPF获得路由信息

## 9.3 【重要】访问控制表(ACL)
ACL是属于路由器中的配置，提供了基于源地址、目的地址、各种协议和端口号的过滤准则。
* 基本ACL，只针对数据包中的【源地址】进行检查。范围2000-2999
* 高级ACL，检查源地址、目的地址、协议。范围3000-3999
* 匹配顺序从上至下，特殊的放在前，通用的放在后。所谓的从上至下指的是以rule-id为顺序。
* 接近数据源地址的路由器应该使用`扩展访问控制`，接近目的地址的路由器应该使用`标准访问控制`

## 9.4 交换机和路由器配置
* 登录
    * Console端口登录。
    * telnet登录，要求先配置好IP。
    * 通过console进行登录需要键入认证信息，而认证信息需要通过Console进行配置。
        * `[R1] authentication-mode [aaa/password/none]`
            * aaa, 需要输入账号和密码进行登录
            * password, 仅需要输入账号便能登录
            * none, 直接登录即可    
* 华为配置视图状态
    * `<switch>`, 用户视图, 交换机路由器正常启动。用户用Telnet登录后自动进入。用户可以查看链接状态，访问其他网络和主机，但是不能更改路由器设置。
    * `[switch]`, 系统视图。在用户视图下输入`system-view`进入。
    * `[switch-bussines]`, 业务视图。在switch输入需要配置的业务命令后进入，通过`quit`退出到系统视图。
* 常见的配置
    * `<huawei>system-view`, 进入系统命令视图
    * `[huawei]sysname R1`, 配置设备名从huawei--->R1
    * `[R1]user-interface console 0`, 进入console业务界面视图，console编号只能为0
    * `[R1-ui-console0] quit`, 退出到系统命令视图.
    * `[R1]interface GigabiEthernet 0/0/1`, 进入接口的配置视图。
    * `[R1-GigabitEthernet 0/0/1] ip address <address> <mask>`, 配置路由器接口的ip地址。
    * `[Router-GigabitEthernet 1/0/0]ip route-static 0.0.0.0 <next-ip>`, 配置默认路由。
    * `[switch-ge 0/0/2] ip address <ip> <mask>`, 配置端口的ip地址和掩码。
    * VLAN相关配置
        * `[switch-ge 0/0/2] port link-type [access/trunk/hybird]`
            * access, 端口只能属于一个vlan，一般用于连接计算机。
            * trunk, 端口可以属于端个vlan，可以接收和发送多个vlan报文，多用于交换机之间。
            * hybrid, 端口可以属于多个vlan，可以接收和发送多个vlan的报文，可以用于交换机之间，也可以用于连接用户主机。并且允许多个vlan不带标签通过。
        * `[switch-ge 0/0/2] port trunk allow-pass vlan allow` 允许所有vlan通过trunk端口
        * `[switch]vlan batch 2 3`, 批量创建VLAN(vlan2和vlan3)
        * `[switch]vlan 2`, 进入VLAN2
        * `[switch-vlan2]mac-vlan mac-address <macaddress>`, vlan2中添加mac地址
        * `[switch-ge 0/0/2] mac-vlan enable`, 交换机接口的vlan启用mac地址
        * `[switch-ge 0/0/1] port default vlan 2`, 将交换机的该接口加入vlan2
        * `[switch]vlanif 2`, 创建并进入VLAN2
    * DHCP相关配置
        * `[switch]dhcp enable`, 开启dhcp
        * `[switch-if] dhcp select global`, 接口工作在全局池模式下。
        * `[switch]ip pool pool1`
        * `[switch-ip-pool-pooll]lease day <day>`, dhcp的ip租期。若没配置，默认为1天。
    * NAT相关配置
        * NAT分类
            * 静态NAT
            * 动态NAT
            * 基于端口的NAT
        * `[R1] nat address-group 1 <start-ip> <end-ip>`, 配置nat的出口ip范围(nat ip池)。
        * `[R1-GigabitEthernet 0/0/1] nat bound 2000 address-group1`, 把GigabitEthernet 0/0/1的ACL2000配置与ip地址1关联。
    * ACL相关配置
        * `[R1]acl 2000` , 定义ACL。
        * `[R1-acl-2000] rule 5 permit source <ip> <nmask>`，添加ACL匹配规则。
    * OSPF相关配置(OSPF, 开放最短路径有限协议, 是一种【链路状态】路由选择协议，在单一自治系统内决策路由
        * `[R1] area <area-id>`, 创建并进入OSPF区域视图
        * `[R1-ospf-area-0] network <ip> <nmask>`, 配置区域所包含的网段。
    * DNS相关配置
        * `[R1-pool]dns-list <dns-ip>`, 配置dns服务器
        * `[R1-pool]domain-name <domain>`, 配置公司域名
    * VPN相关
        * 工作在网络层的有Ipsec VPN和GRE VPN
        * Ipsec有两种模式:隧道和传输。隧道模式常用语局域网的公网通信。
        * 有两个安全协议:AH和ESP。ESP可以提供加密还能提供认证。
        * `[R1]ipset propsal `
        * `[R1]Esp encryption-algorithm 3des`, ESP加密采用3des，通常成对配置
        * `[R1]Esp authentication-algorithm sha1`, ESP认证采用sha1，通常成对配置
        * `[R1-ike peer peer]pre-shared simple huawei`, 配置对等体预共享密钥，通常成对配置
        * `[R1-ike peer peer]remote address <远程建立VPN的ip>`, 通常成对配置
        * `[R1-ipsec-policy...]security acl 3000`
    * RIP相关(距离适量路由协议)
        * v1以广播传播，v2以组播传播
        * 最大跳数为15
        * `[R1]rip`, 进入rip配置
        * `[R1-rip-1] version 2`, 配置为v2版本的rip

# 十、计算机基础
## 10.1 数据表示
### 1) 原码
就是数据的原始表示方法, 需要确定数据的bit数，最高位用于表示正数(0)或者负数(1)
### 2) 反码
正数的反码和原码相同, 负数的反码是符号位不变，其他各位取反。
### 3) 补码
正数的补码和原码相同，负数的反码是符号位不变，其他各位取反后末位加1。
### 4) 定点数
约定小数点的位置固定不变，小数点可以约定在任何位置上。
### 5) 浮点数
小数点位置不固定。
### 6) 海明码
利用奇偶性来检错和校验的方法。

## 10.2 CPU组成
* 组成
    * 运算器
    * 控制器
    * 寄存器
* 流水线
    * 操作周期为指令操作时间最长的一个。
    * m条指令的流水线时间为: 指令周期 + (m-1)*操作周期
* 根据指令周期不同，来区分指令和数据。
    * 取指周期取出的是指令
    * 执行周期取出的是数据
* CPU在DMA结束时响应DMA请求
* 中断响应时间为，中断事件发生到进入中断的这段时间

## 10.3 存储管理
* 页，一个进程空间划分为若干大小相等的区域，称为页。
* 页表中记录了某个页所对应的物理空间起始地址。
* 通常0-11位为页内地址，12-31位位页号。
* 计算机主存主要使用DRAM
* 虚拟存储体系由主存-辅存两级存储组成。
* 高速缓存由硬件实现

# 附录-错题记录
* 以太网
    * 共享式以太网采用CSMA/CD( CSMA/CA用于无线网 )
    * 双绞线最大传输距离为100m
* MAC地址有48bit
* FTP数据传输分为两种：
    * 被动模式(PASV)，数据传输的连接由客户端建立。
    * 主动模式，数据传输的连接由服务器建立。
* ping
    * -a 加上原地址
    * -f 检查MTU
    * -c 指定报文数目
* arp
    * -d 清楚arp缓存
* sha-1为160bit长度
* des的密钥长度为56, 3des的密钥长度为112
* 交换机的每个端口就是一个冲突域，相连的交换机共享一个广播域
* 路由器的每个接口有一个冲突域和一个广播域
* HUB是所有端口共享一个冲突域和广播域。
* PPP会话建立流程，支持异步链路，支持ip动态分配
    * 链路建立阶段，通过LCP检查链路可用状态
    * 验证阶段，通过PAP或CHAP验证
    * 网络层协商阶段，通过NCP配置网络层协议
* trunk
    * 可以承载不同VLAN Id的数据帧
    * Trunk上可以存在vlanid包 也可以存在 pvid的包
    * pvid可修改
    * 包没有vlanid时，打上默认vlanid
* tcp/ip协议栈是4层模型，把osi模型简化了
* TFTP的端口为69， 67和68是DHCP端口，53是DNS端口
* WPA2采用的安全加密算法是AES和TKIP
* SNMP是一种异步请求/响应协议，采用UDP封装。若收到一个GET请求，但是不能提供对象的值，代理以该实例的下个值进行响应。
* 私有IP
    A类: 10.0.0.0---10.255.255.255
    B类: 172.16.0.0---172.31.255.255   
    C类: 192.168.0.0---192.168.255.255
* NAT仅仅指IP转换，将源IP替换，但是port没有替换，使用受㐰和公网ip个数限制。
* NAPT是将源ip和源port都进行替换
* 一个ACL可以应用到多个接口
* IIS不包含DNS
* DHCP中继和DHCP服务器之间是单播
* 使用的端口和协议
    * FTP, TCP 21
    * DNS, UDP 53
    * SMTP, TCP 25
    * POP3, TCP 110
    * TELNET, TCP 23
    * DHCP, UDP 67/68
    * RIP, UDP 520
* A-G-DL-P
    * A(Account), 用户账户
    * G(Global), 全局组
    * DL(DomainLocal), 域本地组
    * P(Prower), 权限
* 相关协议：
    * 802.1d---生成树
    * 802.1w---快速生成树
    * 802.1s---多生成树
    * 802.1q---vlan标记
    * 802.11a/b/g/n---wlan, 其中n是最快的wlan协议
* 无屏蔽双绞线 100base-tx
* 以太网冲突碎片，产生原因是在一个冲突时，槽内有多个站发送数据
* DNS区域传输，将一个DNS上的数据复制到同区域下的多个DNS服务器
* 自动专用IP地址169.254.xxxx.xxxx
* 安全电子邮件采用PGP，是一种基于RSA的协议
* 静态路由的null配置会丢弃包，不反回任何数据。用于避免环路
* web站点默认文件查询方式，为配置的自上而下方向
* DNS服务器之间采用TCP，cs之间采用udp